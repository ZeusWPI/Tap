<% details = details || false %>
<% actions = actions || [] %>
<% compact = compact || false %>
<% compact_mobile = compact_mobile || false %>
<% product_class = "products-item #{compact ? 'is-compact' : ''} #{compact_mobile ? 'is-compact-mobile' : ''}"  %>
<% product_render = render "products/product_content",
    details: details,
    actions: actions,
    product: product,
    compact: compact,
    compact_mobile: compact_mobile %>

<% if actions.include? "barcode:link" %>

  <!--
  Use when linking a new barcode to a specific product
  -->
  <%=
    button_to product_barcodes_path(product),
    class: product_class,
    data: { product: product.id, dismiss: :modal },
    params: { "barcode[code]" => params[:barcode][:code] } do %>
      <%= product_render %>
  <% end %>
<% elsif actions.include? "order:add" %>

  <!--
  Use within the product select modal on the order page
  -->
  <button
    class="<%= product_class %>"
    x-on:click.prevent="getOrderItem(<%= product.id %>).quantity++"
    x-on:click="productsModalOpen = false"
  >
    <%= product_render %>
  </button>
<% else %>

  <!--
  Use in all other places
  -->
  <div class="<%= product_class %> products-item--not-clickable">
    <%= product_render %>
  </div>
<% end %>
